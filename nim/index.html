---
layout: default
title: Nim
---

<html>
<head>
<title>It's Nim!</title>
<script language="JavaScript">
<!--
var z,sp,next_to_that
      a = new int_array(4)
      b = new int_array(4)
      image=new Array()
      image[1]=new Image()
      image[1].src="blank.gif"
      image[2]=new Image()
      image[2].src="penny.gif"

      function one_way(row,col) {
            a[row]--
            document.images[(row-1)*(row-1)+col-1].src=image[1].src
            update_hint(row)
      }

      function player_draught(row,col) {
        if (a[1]+a[2]+a[3]+a[4]!=0 && document.images[(row-1)*(row-1)+col-1].src==image[2].src) {
          if ((next_to_that==5 || next_to_that==6) && a[row]!=0) next_to_that=row
          if (next_to_that==row && a[row]!=0 ) one_way(row,col)
          if (a[1]+a[2]+a[3]+a[4]==0)
            alert("Sorry... I won!");
        }   
      }

      function m_way(row) {
        var tmp=a[row]
        var i = 0
        var k = 0
        //console.log(sp-a[row] + "," + row + "," + i)
        while (i<sp-a[row] && k<=b[row]) {
          if (document.images[(row-1)*(row-1)+k].src==image[2].src) {
                document.images[(row-1)*(row-1)+k].src=image[1].src   
                i++
                //console.log(i)
          }
          k++
          for (var j=1; j<1500; j++){}
        }
        update_hint(row)    
      }

      function update_hint(row){
            document.getElementById("r"+row).textContent=dec2bin(a[row]);
      }
      
      function dec2bin(num){
            var numtemp = (num >>> 0).toString(2)
            while(numtemp.length < 3) {
                  numtemp = "0" + numtemp;
            }
            return numtemp
      }
      
      var im=134456
      var ia=8121
      var ic=28411
      var iran

      function randomize()
      {
        var now  =new Date()
        iran=now.getSeconds()
      }

      function chance(imax)
      {
        iran=(iran*ia+ic) % im
        return(Math.floor(iran/im*imax))
      }

      function winning_position() {
        var q,r,s
        q=(a[1] ^ a[2] ^ a[3] ^ a[4])==0
        r=(a[1] | a[2] | a[3] | a[4])==1
        s=q ^ r
        return(s)
      }

      function computer_draught() {
        var n=1
        if (a[1]+a[2]+a[3]+a[4]!=0) {
          if (next_to_that!=5 && a[1]+a[2]+a[3]+a[4]!=0) {
            next_to_that=5
            z=chance(4)+1
            if (winning_position()) {
              while (a[z]==0) z=(z % 4)+1
              while (document.images[(z-1)*(z-1)+n-1].src==image[1].src) n++
              one_way(z,n)
            }
            else {
              while (!winning_position()) {
                z=(z % 4)+1
                while (a[z]==0) z=(z % 4)+1
                sp=a[z]
                while (!winning_position() && a[z]!=0) a[z]--
                if (!winning_position()) a[z]=sp
              }
              m_way(z)
            }
          }
             
          for (var j=1; j<1500; j++){}
          if (a[1]+a[2]+a[3]+a[4]==0)
            alert("You WON!!! Congratulations...");

        }
            //console.log(a[1] + "," + a[2]  +  ","  +   a[3]  + ","  +  a[4])
             
      }

      function int_array(length) { this.length=length }

      function new_game() {
        a[1]=1;a[2]=3;a[3]=5;a[4]=7
        b[1]=1;b[2]=3;b[3]=5;b[4]=7
        next_to_that=6
        for (var i=0; i<=15; i++) document.images[i].src=image[2].src
        for (var j=1; j<=4; j++) update_hint(j)
        document.distribution.value="  "
      }

      function draw(nr) {
        var str=""
        str +=""
        alert(str)
        if (document.images[nr].src==image[2].src) {
          document.images[nr].src=image[2].src
        }
        else {
          document.images[nr].src=image[1].src
        }
      }

//-->
</script>
<style><!--


INPUT.Label {
  height:16px;
  background-color:#FFFFCC;
  border:1px solid #996600;
  color:#000000;
  font-size:10px;
  line-height: normal;
  font-family:Verdana, Arial, Helvetica, sans-serif;
  font-style: normal;
}

INPUT.Button {
  height:16px;
  background-color:#FFCC00;
  border:1px outset #996600;
  font-size:10px;
  line-height:normal;
  text-align:center;
  font-family:Verdana, Arial, Helvetica, sans-serif;
  font-style: normal;
}

INPUT.Button2 {
  height:16px;
  background-color:#FF0000;
  border:1px outset #996600;
  font-size:10px;
  line-height:normal;
  text-align:center;
  font-family:Verdana, Arial, Helvetica, sans-serif;
  font-style: normal;
  color: #FFFFFF;
}

--></style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0066FF" alink="#FF0000" leftmargin="0" topmargin="5" marginwidth="0" marginheight="0" onLoad="new_game()">
<table width="300" border="0" align="center" cellpadding="0" cellspacing="0">
<tr>
<td align="center" valign="top" bgcolor="#FFFFFF"><p><font color="#663300" size="3" face="Verdana, Arial, Helvetica, sans-serif"><b>Let's play some Nim!</b></font></p>
<blockquote>
<p><font face="Verdana, Arial, Helvetica, sans-serif" size="1">You can remove any number of pennies from any ONE
row at a time. Click a penny to remove it. Complete your turn by clicking PC move. You win if the computer takes the last penny.<br>
You move first, or PC moves first if you click PC move.</font></p>
</blockquote>
<p></p>
<form>
<table BORDER=0 cellpadding="1" cellspacing="1" id="nim game">
<tr align="center" valign="top">
<td COLSPAN="3"></td>
<td width="32"><img onclick="player_draught(1,1)" SRC="penny.gif"></td>
<td COLSPAN="3"></td>
</tr>
<tr align="center" valign="top">
<td COLSPAN="2"></td>
<td width="32"><img onclick="player_draught(2,1)" SRC="penny.gif"></td>
<td width="32"><img onclick="player_draught(2,2)" SRC="penny.gif"></td>
<td width="32"><img onclick="player_draught(2,3)" SRC="penny.gif"></td>
<td COLSPAN="2"></td>
</tr>
<tr align="center" valign="top">
<td width="32"></td>
<td width="32"><img onclick="player_draught(3,1)" SRC="penny.gif"></td>
<td width="32"><img onclick="player_draught(3,2)" SRC="penny.gif"></td>
<td width="32"><img onclick="player_draught(3,3)" SRC="penny.gif"></td>
<td width="32"><img onclick="player_draught(3,4)" SRC="penny.gif"></td>
<td width="32"><img onclick="player_draught(3,5)" SRC="penny.gif"></td>
<td width="32"></td>
</tr>
<tr align="center" valign="top">
<td WIDTH="32"><img onclick="player_draught(4,1)" SRC="penny.gif"></td>
<td WIDTH="32"><img onclick="player_draught(4,2)" SRC="penny.gif"></td>
<td WIDTH="32"><img onclick="player_draught(4,3)" SRC="penny.gif"></td>
<td WIDTH="32"><img onclick="player_draught(4,4)" SRC="penny.gif"></td>
<td WIDTH="32"><img onclick="player_draught(4,5)" SRC="penny.gif"></td>
<td WIDTH="32"><img onclick="player_draught(4,6)" SRC="penny.gif"></td>
<td WIDTH="32"><img onclick="player_draught(4,7)" SRC="penny.gif"></td>
</tr>
<tr align="center" valign="middle">
<td height="70" colspan="7"><input name="button2" type="button" class="button" onClick="new_game()" value="New game">
&nbsp; </td>
<td height="70"><input name="button2" type="button" class="button2" onClick="computer_draught()" value="PC move">
</td>
</tr>
</table>
</form>
<blockquote>
<p><font size="1" face="Verdana, Arial, Helvetica, sans-serif">This code is adapted from code from Archimedes Lab,
      I recommend checking them out. Fair warning, this is my first time working in javascript,
      comments and suggestions welcome.</font></p>
</blockquote>
<script LANGUAGE="JavaScript"><!--
     randomize()
   //--></script>
</td>
</tr>
</table>
</body>
      
<head>
<style>
h1 {text-align:center;}
p {text-align:center;}
details {text-align:center;}
</style>
</head>
<body>
<details> 
  <summary>Want a hint?  </summary>
      <span id="r1"> 001 </span> <br/>
      <span id="r2"> 011 </span> <br/>
      <span id="r3"> 101 </span> <br/>
      <span id="r4"> 111 </span> <br/>
</details>
<h1> Learn to win Nim and influence people^ here: <a href="https://benpyle.github.io/nim/nim_explainer"> <br/>Nim Explainer</a> </h1>
<p> ^Learning to influence people is not guaranteed, nor likely. But you'll sure be able to win at Nim.</p> 
</body>
</html>
